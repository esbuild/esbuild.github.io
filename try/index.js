var Me=["absPaths","conditions","dropLabels","mainFields","resolveExtensions","target"];function q(e,o,t){let r=e.trimStart(),a=/^{|^\/[*/]/.test(r),i;if(!r)return t&&(t.innerHTML=""),{};if(a)i=Ke(e);else{let p=n=>{if(i[n]!==void 0)try{i[n]=new RegExp(i[n]+"")}catch(l){throw n=n.replace(/[A-Z]/g,h=>"-"+h.toLowerCase()),new Error(`Invalid regular expression for "--${n}=": ${l.message}`)}},c=n=>{if(i[n]!==void 0)try{i[n]=+i[n]}catch(l){throw n=n.replace(/[A-Z]/g,h=>"-"+h.toLowerCase()),new Error(`Invalid number for "--${n}=": ${l.message}`)}};i=qe(e,o),c("logLimit"),c("lineLimit"),p("mangleProps"),p("reserveProps");for(let n of Me)i[n]!==void 0&&(i[n]=(i[n]+"").split(","));let u=i.supported;if(typeof u=="object"&&u!==null)for(let n in u)u[n]==="true"?u[n]=!0:u[n]==="false"&&(u[n]=!1)}let s=i.tsconfigRaw;if(s!==void 0)try{s=JSON.parse(s)}catch{}return t&&(t.innerHTML="",ze(t,a,i,s,e),Ve(t,a,i,s)),i}function ze(e,o,t,r,a){if(r===void 0&&(r={}),typeof r!="object")return;let i=r.compilerOptions;if(i===void 0&&(i={}),typeof i=="object"&&(t.loader==="ts"||t.loader==="tsx")&&typeof i.experimentalDecorators!="boolean"){let s={...t,tsconfigRaw:{...r,compilerOptions:{...i,experimentalDecorators:!0}}},p;if(o)p=Oe(s);else if(t.tsconfigRaw===void 0)p=[a,/\n/.test(a)?`
`:" ",le({tsconfigRaw:s.tsconfigRaw})].join("");else try{p=le(s)}catch{}if(p!==void 0){let c=document.createElement("a");c.href="javascript:void 0",c.textContent="Enable TS experimental decorators",c.onclick=()=>{let u=e.parentElement.querySelector("textarea");e.innerHTML="",u.value=p,u.dispatchEvent(new Event("input"))},e.append(c," ")}}}function Ve(e,o,t,r){let a,i=document.createElement("a");if(o)try{a=le(t),i.textContent="Switch to CLI syntax"}catch{}else a=Oe(r?{...t,tsconfigRaw:r}:t),i.textContent="Switch to JS syntax";a!==void 0&&(i.href="javascript:void 0",i.onclick=()=>{let s=e.parentElement.querySelector("textarea");e.innerHTML="",s.value=a,s.dispatchEvent(new Event("input"))},e.append(i))}function qe(e,o){let t=[],r=e.length,a=0,i=0,s=0;for(;s<r;){let n=s,l=a,h=s-i,f="",d=e[s];if(d===" "||d==="	"||d===`
`){s++,d===`
`&&(a++,i=s);continue}for(;s<r&&(d=e[s],!(d===" "||d==="	"||d===`
`));)if(s++,d==="\\"&&s<r)d=e[s++],d===`
`?(a++,i=s):f+=d;else if(d==="'"){let g=a,m=s-i-1;for(;s===r&&ae(e,"'",g,m,a,s-i),d=e[s++],d!=="'";){if(d==="\\"&&s<r&&e[s]!=="'"&&(d=e[s++],d===`
`)){a++,i=s;continue}d===`
`&&(a++,i=s),f+=d}}else if(d==='"'){let g=a,m=s-i-1;for(;s===r&&ae(e,'"',g,m,a,s-i),d=e[s++],d!=='"';){if(d==="\\"&&s<r&&(d=e[s++],d===`
`)){a++,i=s;continue}d===`
`&&(a++,i=s),f+=d}}else f+=d;t.push({$e:f,_:l,ye:h,Be:s-n})}let p=[],c=Object.create(null),u=(n,l)=>(n!==n.toLowerCase()&&v(e,"Invalid CLI-style flag: "+JSON.stringify("--"+n),l._,l.ye,n.length+2),n.replace(/-(\w)/g,(h,f)=>f.toUpperCase()));for(let{$e:n,...l}of t){let h=n.indexOf("=");if(n.startsWith("--")){let f=n.indexOf(":");if(f>=0&&h<0){let d=u(n.slice(2,f),l),g=n.slice(f+1);(!(d in c)||!Array.isArray(c[d]))&&(c[d]=[]),c[d].push(g)}else if(f>=0&&f<h){let d=u(n.slice(2,f),l),g=n.slice(f+1,h),m=n.slice(h+1);(!(d in c)||typeof c[d]!="object"||Array.isArray(c[d]))&&(c[d]=Object.create(null)),c[d][g]=m}else if(h>=0){let d=n.slice(h+1);c[u(n.slice(2,h),l)]=d==="true"?!0:d==="false"?!1:d}else c[u(n.slice(2),l)]=!0}else n.startsWith("-")||o===0?v(e,'All CLI-style flags must start with "--"',l._,l.ye,l.Be):(c.entryPoints=p,p.push(h<0?n:{in:n.slice(h+1),out:n.slice(0,h)}))}return p.length&&(c.entryPoints=p),c}function Ke(e){let o=()=>{let f=l.A===13?"string":(l.A===10?"identifier ":"")+JSON.stringify(l.$e);return v(e,`Unexpected ${f} in ${s}`,l._,l.ye,l.$e.length)},t=(f,d,g)=>v(e,`Expected "${d}" after ${g} in ${s}`,f._,f.ye+f.$e.length,0,"",0,0,0,d),r=(f=0)=>{for(;n<p;){let d=c,g=n-u,m=e[n];if(m===`
`){c++,u=++n;continue}if(m===" "||m==="	"){n++;continue}if(m==="/"){let L=n++;if(n<p&&e[n]==="/"){for(n++;n<p&&e[n]!==`
`;)n++;continue}if(n<p&&e[n]==="*"){for(n++;;)if(n===p&&v(e,'Expected "*/" to terminate multi-line comment',c,n-u,0,"The multi-line comment starts here:",d,g,2,"*/"),m=e[n++],m===`
`)c++,u=n;else if(m==="*"&&n<p&&e[n]==="/"){n++;break}continue}let x=0;for(;(n===p||e[n]===`
`)&&(x?v(e,'Expected "]" to terminate character class',c,n-u,0,"The character class starts here:",c,x-u,1,"]"):v(e,'Expected "/" to terminate regular expression',c,n-u,0,"The regular expression starts here:",d,g,1,"/")),m=e[n++],!(m==="/"&&!x);)m==="]"&&x?x=0:m==="["?x=n-1:m==="\\"&&n<p&&e[n]!==`
`&&n++;for(;n<p&&/\w/.test(e[n]);)n++;let E=e.slice(L,n),T;try{T=(0,eval)(E)}catch{v(e,`Invalid regular expression in ${s}`,d,g,n-L)}l={_:d,ye:g,A:12,$e:E,be:T};return}f&2&&v(e,`Expected end of file after ${s}`,c,n-u,0);let I="-,:[]{}()+".indexOf(m);if(I>=0){n++,l={_:d,ye:g,A:I,$e:m,be:m};return}if(m==="."||m>="0"&&m<="9"){let L=/^[\.\w]$/,x=n++;for(;n<p&&L.test(e[n]);)n++;let E=e.slice(x,n);if(!/\d/.test(E))n=x;else{let T=+E;T!==T&&v(e,`Invalid number "${E}" in ${s}`,d,g,n-x),l={_:d,ye:g,A:12,$e:E,be:T};return}}let w=/^[\w\$]$/;if(w.test(m)){let L=n++;for(;n<p&&w.test(e[n]);)n++;let x=e.slice(L,n),E=12,T=x;f&1?E=10:x==="null"?T=null:x==="true"?T=!0:x==="false"?T=!1:x==="undefined"?T=void 0:x==="Infinity"?T=1/0:x==="NaN"?T=NaN:x==="function"?E=11:E=10,l={_:d,ye:g,A:E,$e:x,be:T};return}if(m==='"'||m==="'"){let L=n++;for(;;)if((n===p||e[n]===`
`)&&ae(e,m,d,g,c,n-u),e[n]==="\\"&&n+1<p)n+=2,e[n-1]===`
`&&(c++,u=n);else if(e[n++]===m)break;let x=e.slice(L,n),E;try{E=(0,eval)(x)}catch{v(e,`Invalid string in ${s}`,d,g,n-L)}l={_:d,ye:g,A:13,$e:x,be:E};return}v(e,`Unexpected ${JSON.stringify(m)} in ${s}`,c,n-u,1)}f&2||v(e,`Unexpected end of file in ${s}`,c,n-u,0)},a=(f,d)=>{let g=/\}/g,m="";g.lastIndex=d;for(let I;I=g.exec(e);)try{let w=new Function("return {"+f+e.slice(d,I.index+1)+"}."+f);return n=I.index+1,w()}catch(w){m=": "+w.message}v(e,"Invalid function literal"+m,l._,l.ye,l.$e.length)},i=()=>{if(l.A===5){let f=Object.create(null),d=Object.create(null);for(;r(1),l.A!==6;){l.A!==13&&l.A!==10&&o();let g=d[l.be];g&&v(e,`Duplicate key ${JSON.stringify(l.be)} in object literal`,l._,l.ye,l.$e.length,`The original key ${JSON.stringify(l.be)} is here:`,g._,g.ye,g.$e.length);let m=l,I=n,w;r(),l.A===7?w=a(m.be,I):(l.A!==2&&t(m,":","property "+JSON.stringify(m.be)),r(),l.A===11?w=a(m.be,I):w=i()),f[m.be]=w,d[m.be]=m;let L=l;if(r(),l.A===6)break;l.A!==1&&t(L,",","property "+JSON.stringify(m.be))}return f}if(l.A===3){let f=[],d=0;for(;r(),l.A!==4;)if(l.A!==1){f[d++]=i();let g=l;if(r(),l.A===4)break;l.A!==1&&t(g,",","array element")}else f.length=++d;return f}return l.A===12||l.A===13?l.be:l.A===9?(r(),+i()):l.A===0?(r(),-i()):o()},s="JSON5 value",p=e.length,c=0,u=0,n=0,l;r();let h=i();return r(2),h}function v(e,o,t,r,a,i="",s=0,p=0,c=0,u){let n=e.split(`
`),l=new Error(o);throw l.Oe={We:"<options>",_:t+1,ye:r,Be:a,Je:n[t],Ke:u},i&&(l.Ge=[{$e:i,Oe:{We:"<options>",_:s+1,ye:p,Be:c,Je:n[s]}}]),l}function ae(e,o,t,r,a,i){let s=o==='"'?"double":"single";v(e,`Failed to find the closing ${s} quote`,a,i,0,`The opening ${s} quote is here:`,t,r,1,o)}function le(e){let o=a=>/[ \t\n\\'"]/.test(a)?'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"':a,t=a=>a.replace(/[A-Z]/g,i=>"-"+i.toLowerCase()),r=[];for(let a in e){let i=t(a),s=e[a],p=typeof s;if(p==="string"||p==="boolean"||p==="number"||s===null)r.push(s===!0?"--"+i:`--${i}=${s}`);else if(Array.isArray(s))if(Me.includes(a))r.push(`--${i}=${s}`);else for(let c of s)r.push(a==="entryPoints"?typeof c=="object"&&c!==null&&typeof c.in=="string"&&typeof c.out=="string"?`${c.out}=${c.in}`:c:`--${i}:${c}`);else if(s instanceof RegExp)r.push(`--${i}=${s.source}`);else if(a==="tsconfigRaw")r.push(`--${i}=${JSON.stringify(s)}`);else if(p==="object"&&a!=="mangleCache"&&a!=="stdin")for(let c in s)r.push(`--${i}:${c}=${s[c]}`);else throw new Error("Not representable")}return r.map(o).join(" ")}function Oe(e){let o=(t,r,a=!0)=>{let i=typeof t;if(i==="string"){let c=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\n"),u=c.split("'"),n=c.split('"');return n.length<u.length?'"'+n.join('\\"')+'"':"'"+u.join("\\'")+"'"}if(i==="boolean"||i==="number"||t instanceof RegExp)return t+"";let s=r+"  ";if(Array.isArray(t)){let c=t.every(n=>typeof n=="string"),u="[";for(let n of t)u+=u==="["?c?"":`
`+s:c?", ":s,u+=o(n,s,!1),c||(u+=`,
`);return u!=="["&&!c&&(u+=r),u+"]"}let p="{";for(let c in t){let u=t[c];p+=p==="{"?a?`
`+s:" ":a?s:", ",p+=`${/^[A-Za-z$_][A-Za-z0-9$_]*$/.test(c)?c:o(c,"")}: ${o(u,s)}`,a&&(p+=`,
`)}return p!=="{"&&(p+=a?r:" "),p+"}"};return o(e,"")}function j(e){let o=document.createElement("a");return o.className="underLink",o.href="javascript:void 0",o.target="_blank",o.textContent="Visualize this source map",o.onclick=()=>{let[t,r]=e(),a=`${t.length}\0${t}${r.length}\0${r}`;o.href="https://evanw.github.io/source-map-visualization/#"+btoa(a),setTimeout(()=>o.href="javascript:void 0")},o}function Ge(e){let o=/\/(\/)[#@] *sourceMappingURL=([^\s]+)/.exec(e);return o||(o=/\/(\*)[#@] *sourceMappingURL=((?:[^\s*]|\*[^/])+)(?:[^*]|\*[^/])*\*\//.exec(e)),o&&o[2]}function P(e,o,t){let r=Ge(o);if(t&&t.remove(),r){let a;try{r.startsWith("data:application/json;base64,")?a=JSON.parse(atob(r.slice(29))):r.startsWith("data:application/json;charset=utf-8,")&&(a=JSON.parse(decodeURIComponent(r.slice(36))))}catch{}a&&typeof a=="object"&&(t=j(()=>[o,JSON.stringify(a)]),e.append(t))}return t}var S=document.getElementById("outputResult"),G=document.createElement("textarea"),fe=document.createElement("textarea"),X=document.createElement("textarea"),me=document.createElement("textarea"),Z=document.createElement("textarea"),de=[],Ze=new TextEncoder,N,pe,ue=!1,Ce=e=>pe?pe.format(e):e+"",ce=e=>{let o=e.toFixed(1).split(".",2);return Ce(+o[0])+"."+o[1]},Xe=e=>e===1?"1 byte":e<1024?Ce(e)+" bytes":e<1024*1024?ce(e/1024)+" kb":e<1024*1024*1024?ce(e/(1024*1024))+" mb":ce(e/(1024*1024*1024))+" gb";C(G,!0);C(fe,!0);C(X,!0);C(me,!0);C(Z,!0);function b(e){document.body.style.paddingBottom=e.clientHeight+"px",e.style.height="0",e.style.height=e.scrollHeight+1+"px",document.body.style.paddingBottom="0"}function C(e,o){e.readOnly=o,e.spellcheck=!1,e.autocapitalize="off",e.autocomplete="off"}function Y(e){let o=`\x1B[31m\u2718 \x1B[41;31m[\x1B[41;97mERROR\x1B[41;31m]\x1B[0m \x1B[1m${e&&e.message||e}\x1B[0m`,t=e&&e.Oe,r=e&&e.Ge;if(t&&(o+=Ie(t)),r)for(let a of r)o+=`
  ${a.$e}`,a.Oe&&(o+=Ie(a.Oe));return o}function Ie({We:e,_:o,ye:t,Be:r,Je:a,Ke:i}){let p=a.length,c=r<2?"^":"~".repeat(r),u=`

    ${e}:${o}:${t}:
`;if(p>80){let n=Math.max(0,Math.min(t*2+r-80>>1,t-16,p-80)),l=a.slice(n,n+80);t=Math.max(0,t-n),r=Math.min(r,l.length-t),l.length>3&&n>0&&(l="..."+l.slice(3),t=Math.max(t,3)),l.length>3&&n+80<p&&(l=l.slice(0,l.length-3)+"...",r=Math.max(0,Math.min(r,l.length-3-t))),a=l}return u+=`\x1B[37m${o.toString().padStart(7)} \u2502 ${a.slice(0,t)}\x1B[32m${a.slice(t,t+r)}\x1B[37m${a.slice(t+r)}
`,i&&(u+=`        \u2502 ${" ".repeat(t)}\x1B[32m${c}\x1B[37m
`,c=i),u+=`        \u2575 ${" ".repeat(t)}\x1B[32m${c}\x1B[0m
`,u}function H(e,o,t){if(t!==void 0){let r=document.createElement("div");return e.textContent=t.replace(/\n$/,""),r.id=o,r.className="hasLabel",r.append(e),S.append(r),b(e),r}}function ge({Ze:e,Ye:o,Ne:t,Xe:r,ve:a}){if(S.innerHTML="",H(G,"transformOutput",e),o?(H(Z,"sourceMap",o),N&&N.remove(),N=j(()=>[e||"",JSON.stringify(JSON.parse(o))]),Z.parentElement.append(N)):N=P(G.parentElement,e||"",N),t&&H(X,"transformMangleCache",JSON.stringify(t,null,2)),H(fe,"legalComments",r),a){let i=document.createElement("div");i.id="stderrLog",i.innerHTML=$e(a),S.append(i)}if(e===void 0&&!a){let i=document.createElement("div");i.id="outputStatus",i.textContent="(no output)",S.append(i)}}function he({et:e,tt:o,Ne:t,ve:r},a){if(S.innerHTML="",de.length=0,e){e.sort((i,s)=>+(i.path>s.path)-+(i.path<s.path));for(let i of e){let s=document.createElement("div"),p=document.createElement("div"),c=document.createElement("span"),u=document.createElement("textarea");if(p.className="outputPath",p.textContent=i.path.replace(/^\//,""),c.textContent=" ("+Xe(Ze.encode(i.text).length)+")",p.append(c),u.readOnly=!0,u.value=i.text.replace(/\n$/,""),C(u,!0),s.className="buildOutput hasLabel",s.append(u),i.path.endsWith(".map")){for(let n of e)if(i.path===n.path+".map"){s.append(j(()=>[n.text,JSON.stringify(JSON.parse(i.text))]));break}}else P(s,i.text,void 0);S.append(p,s),de.push(u),b(u)}}if(r){let i=document.createElement("div");i.id="stderrLog",i.innerHTML=$e(r),S.append(i)}if((!e||!e.length)&&!r){let i=document.createElement("div");i.id="outputStatus",i.textContent=a?"(no output)":"(no entry points)",S.append(i)}if(t&&H(X,"mangleCache",JSON.stringify(t,null,2)),o){let i=H(me,"metafile",JSON.stringify(o,null,2)),s=document.createElement("a");s.className="underLink",s.href="javascript:void 0",s.target="_blank",s.textContent="Analyze this metafile",s.onclick=()=>{s.href="/analyze/#"+btoa(JSON.stringify(o)),setTimeout(()=>s.href="javascript:void 0")},i.append(s)}}function U(e){e&&(ue=!1),!ue&&(S.innerHTML=`<span id="outputStatus">Loading${e?" version "+e:""}...</span>`)}function Be(e){ue=!0,S.innerHTML="";let o=document.createElement("div");o.className="problem",o.innerHTML=`\u274C Failed to load esbuild: ${e}`,S.append(o)}function $e(e){return"<span>"+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x1B\[([^m]*)m/g,(o,t)=>{switch(t){case"1":return'</span><span class="color-bold">';case"4":return'</span><span class="color-underline">';case"31":return'</span><span class="color-red">';case"32":return'</span><span class="color-green">';case"33":return'</span><span class="color-yellow">';case"35":return'</span><span class="color-magenta">';case"37":return'</span><span class="color-dim">';case"41;31":return'</span><span class="bg-red color-red">';case"41;97":return'</span><span class="bg-red color-white">';case"43;33":return'</span><span class="bg-yellow color-yellow">';case"43;30":return'</span><span class="bg-yellow color-black">';case"0":return"</span><span>"}throw new Error(`Unknown escape sequence: ${t}`)})+"</span>"}addEventListener("resize",()=>{if(M===0)b(G),b(Z),b(fe);else{for(let e of de)b(e);b(me)}b(X)});try{pe=new Intl.NumberFormat}catch{}var A=document.querySelector("#transformOptions textarea"),Ye=document.querySelector("#transformOptions .underLink"),$=document.querySelector("#transformInput textarea"),xe=document.querySelector("#transformInput .underLink"),Pe;function Ae(){return[A.value,$.value]}function be(e,o){(A.value!==e||$.value!==o)&&(A.value=e,$.value=o,D()),W()}function W(){b(A),b($)}function D(){let e=A.value,o=$.value;Q(),Pe=P($.parentElement,o,Pe);try{_({je:"transform",Ue:o,Ie:q(e,0,Ye)}).then(t=>{ge(t)},()=>{})}catch(t){ge({ve:Y(t)})}if(xe.innerHTML="",!e&&!o){let t=document.createElement("a");t.href="javascript:void 0",t.textContent="Load an example...",t.onclick=Re,xe.append(t)}}function Re(){be(`--target=es6
--loader=tsx
--jsx=automatic
--minify-identifiers
--sourcemap`,`// The "tsx" loader removes type annotations
export type NamesProps = { names?: string[] }

export const NamesComponent = (props: NamesProps) => {
  // The "?." operator will be transformed for ES6
  const names = props.names?.join(' ')

  // The "tsx" loader transforms JSX syntax into JS
  return <div>Names: {names}</div>
}`)}A.oninput=()=>{b(A),D()};$.oninput=()=>{b($),D()};xe.querySelector("a").onclick=Re;addEventListener("resize",W);W();var je=Qe(),k=document.querySelector("#versionPicker select"),ee=document.createElement("option"),te;ee.textContent="Loading...";k.append(ee);k.disabled=!0;je.then(e=>{let o=e.filter(t=>!/^0\.[0-4]\.|^0\.5\.0/.test(t));k.disabled=!1,ee.remove();for(let t of o){let r=document.createElement("option");r.textContent=t,k.append(r)}k.onchange=()=>te(k.value),k.selectedIndex=-1},()=>{ee.textContent="\u274C Loading failed!"});function Ne(){return k.disabled?null:k.selectedIndex<0?"pkgurl":k.value}function ye(e){te=e}async function z(e){if(e==="pkgurl")k.selectedIndex!==-1&&(k.selectedIndex=-1,await te("pkgurl"));else{let o=await je,t=e==="latest"?o.length?0:-1:o.indexOf(e);t>=0&&k.selectedIndex!==t&&(k.selectedIndex=t,await te(o[t]))}}async function Qe(){let e=new AbortController,o=setTimeout(()=>e.abort("Timeout"),5e3);try{let t="https://data.jsdelivr.com/v1/package/npm/esbuild-wasm",r=await fetch(t,{signal:e.signal});if(r&&r.ok){clearTimeout(o);let a=(await r.json()).versions;if(a&&a.length)return console.log(`Loaded ${a.length} versions from ${t}`),a}}catch(t){console.error(t)}try{let t="https://registry.npmjs.org/esbuild-wasm",r=(await fetch(t).then(a=>a.json())).versions;if(r&&(r=Object.keys(r).reverse(),r.length))return console.log(`Loaded ${r.length} versions from ${t}`),r}catch(t){console.error(t)}throw new Error}function He(){let e=location.hash,o=atob(e.slice(1)).split("\0");if(o[0]==="t"&&o.length===4)return V(0),be(o[2],o[3]),z(o[1]),!0;if(o[0]==="b"&&o.length%3===0){let t=[];for(let r=3;r<o.length;r+=3)t.push({ke:o[r]==="e",Te:o[r+1],we:o[r+2]});return V(1),Ee(o[2],t),z(o[1]),!0}if(location.hash!=="")try{history.replaceState({},"",location.pathname+location.search)}catch{}return!1}function Q(){let e=Ne();if(!e)return;let o;if(M===0){let[r,a]=Ae();(r||a)&&(o=["t",e,r,a])}else{let[r,a]=ve();o=["b",e,r];for(let i of a)o.push(i.ke?"e":"",i.Te,i.we)}let t=location.pathname+location.search;try{let r=o?"#"+btoa(o.join("\0")).replace(/=+$/,""):"";location.hash!==r&&history.replaceState({},"",r||t)}catch{if(location.hash!=="")try{history.replaceState({},"",t)}catch{}}}var R=document.querySelector("#buildOptions textarea"),_e=document.querySelector("#buildOptions .underLink"),Te=document.getElementById("addInput"),et=document.getElementById("buildInputs"),y=[];function ve(){return[R.value,y.map(e=>({ke:e.Le.classList.contains("entryPoint"),Te:e.Se.value.trim(),we:e.Pe.value}))]}function Ee(e,o){if(JSON.stringify([e,o])!==JSON.stringify(ve())){for(let t of y)t.Le.remove();y.length=0,R.value=e;for(let t of o)we(t.ke,t.Te,t.we);F(),O()}ne()}function Fe(){y.length||we(!0,ke())}function ne(){b(R);for(let e of y)b(e.Pe)}function O(){Q();try{let e=q(R.value,1,_e),o=Array.isArray(e.entryPoints)?e.entryPoints:e.entryPoints=[],t=Object.create(null),r=Object.create(null),a;for(let i of y){let s=i.Se.value.trim();if((r[s]||(r[s]=[])).push(i),s)t[s]=i.Pe.value,i.Le.classList.contains("entryPoint")&&!o.includes(s)&&o.push(s);else{let c=e.stdin&&typeof e.stdin=="object"?e.stdin:e.stdin={};c.contents=i.Pe.value,"resolveDir"in c||(c.resolveDir="/")}}for(let i in r){let s=r[i];if(s.length>1){for(let p of s)p.Le.classList.add("duplicate");a||(a=new Error("Duplicate input file: "+(i?JSON.stringify(i):"<stdin>")))}else s[0].Le.classList.remove("duplicate")}if(a)throw a;_({je:"build",Ue:t,Ie:e}).then(i=>{he(i,o.length)},()=>{})}catch(e){he({ve:Y(e)},-1)}for(let e of y)e.Ve.innerHTML="";if(!R.value&&y.length===1&&!y[0].Pe.value){let e=document.createElement("a");e.href="javascript:void 0",e.textContent="Load an example...",e.onclick=()=>Ee(`--bundle
--format=esm
--outfile=out.js
--sourcemap
--drop-labels:DEBUG
--minify-identifiers`,[{ke:!0,Te:"entry.ts",we:`// This import will be inlined by the bundler
import * as UnionFind from '@example/union-find'

// Type declarations are automatically removed
export type Graph<K, V> = Map<K, Node<K, V>>
export interface Node<K, V> {
  data: V
  edges: K[]
}

export function connectedComponents<K, V>(graph: Graph<K, V>) {
  let groups = UnionFind.create(graph.keys())
  let result = new Map<K, K[]>()

  for (let [key, { edges }] of graph)
    for (let edge of edges)
      UnionFind.union(groups, key, edge)

  // This is removed by "--drop-labels:DEBUG"
  DEBUG: console.log('Groups: ' +
    UnionFind.debugString(groups))

  for (let key of graph.keys()) {
    let group = UnionFind.find(groups, key)
    let component = result.get(group) || []
    component.push(key)
    result.set(group, component)
  }

  return [...result.values()]
}

// This is removed by "--drop-labels:DEBUG"
DEBUG: {
  let observed = JSON.stringify(
    connectedComponents(new Map([
      ['A', { data: 1, edges: ['C'] }],
      ['B', { data: 2, edges: ['B'] }],
      ['C', { data: 3, edges: ['A', 'B'] }],
      ['X', { data: -1, edges: ['Y'] }],
      ['Y', { data: -2, edges: ['X'] }],
      ['Z', { data: -3, edges: [] }],
    ])))
  let expected = '[["A","B","C"],["X","Y"],["Z"]]'
  console.assert(observed === expected,
    \`Expected \${expected} but got \${observed}\`)
}`},{ke:!1,Te:"node_modules/@example/union-find/index.js",we:`// See: https://en.wikipedia.org/wiki/Disjoint-set_data_structure

export function create(keys) {
  let map = new Map()
  for (let x of keys)
    map.set(x, x)
  return map
}

export function find(map, x) {
  while (map.get(x) !== x)
    map.set(x, x = map.get(map.get(x)))
  return x
}

export function union(map, a, b) {
  map.set(find(map, a), find(map, b))
}

// This is removed by tree-shaking when unused
export function debugString(map) {
  let obj = {}
  for (let [k, v] of map) {
    obj[k] = v
    while (map.get(v) !== v)
      obj[k] += ' => ' + (v = map.get(v))
  }
  return JSON.stringify(obj, null, 2)
}`},{ke:!1,Te:"node_modules/@example/union-find/index.d.ts",we:`// Files related to type checking are ignored by esbuild
export declare function create<T>(keys: Iterable<T>): Map<T, T>;
export declare function find<T>(map: Map<T, T>, x: T): T;
export declare function union<T>(map: Map<T, T>, a: T, b: T): void;
export declare function debugString<T>(map: Map<T, T>): string;`}]),y[0].Ve.append(e)}}function ke(){if(!y.length)return"entry.js";let e=1,o="file.js";for(;y.some(t=>t.Se.value.trim()===o);)o=`file${++e}.js`;return o}function F(){Te.textContent="+ "+ke()}function we(e=!1,o="",t=""){let r=()=>{let f=p.value;if(f.endsWith(".map")){let d;try{d=JSON.parse(u.value)}catch{}if(d&&typeof d=="object"){h=j(()=>{let g="";for(let m of y)if(f===m.Se.value+".map"){g=m.Pe.value;break}return[g,JSON.stringify(d)]}),a.append(h);return}}h=P(a,u.value,h)},a=document.createElement("div"),i=document.createElement("a"),s=document.createElement("a"),p=document.createElement("input"),c=document.createElement("div"),u=document.createElement("textarea"),n=document.createElement("div"),l={Le:a,Se:p,Pe:u,Ve:n},h;return C(p,!1),C(u,!1),p.placeholder="<stdin>",p.value=o,i.className="entryToggle",i.textContent="",i.href="javascript:void 0",s.className="remove",s.textContent="\xD7",s.href="javascript:void 0",u.placeholder="(enter your code here)",u.value=t,a.className="buildInput",e&&a.classList.add("entryPoint"),c.className="hasLabel",c.append(u),n.className="underLink",a.append(i,p,s,c,n),et.insertBefore(a,Te),p.oninput=()=>{r(),F(),O()},p.onblur=()=>{let f=p.value.trim();p.value!==f&&(p.value=f,F(),O())},u.oninput=()=>{r(),b(u),O()},i.onclick=()=>{a.classList.toggle("entryPoint"),O()},s.onclick=()=>{let f=y.indexOf(l);f<0||(y.splice(f,1),a.remove(),F(),O())},y.push(l),r(),F(),b(u),l}R.oninput=()=>{b(R),O()};Te.onclick=()=>{let e=we(!y.length,ke());e.Se.focus(),e.Se.select(),O()};addEventListener("resize",ne);F();var M=0,Je=[document.getElementById("transformPanel"),document.getElementById("buildPanel")],tt=document.getElementById("modeSwitcher"),re=tt.querySelectorAll("a");re[0].onclick=()=>{V(0)&&(U(null),oe())};re[1].onclick=()=>{Fe(),V(1)&&(U(null),oe())};function V(e){return M===e?!1:(re[M].classList.remove("active"),Je[M].style.display="none",M=e,re[M].classList.add("active"),Je[M].style.display="block",!0)}function oe(){M===0?(W(),D()):(ne(),O())}var De=new URLSearchParams(location.search),Le=De.get("polywasm"),se=De.get("pkgurl"),nt=fetch("worker.js").then(e=>e.text()),J=null,B=null,ie=new Promise((e,o)=>{ye(t=>{let r=We(t);return r.then(e,o),ye(a=>(ie.then(i=>i.terminate()),ie=We(a),ie)),r})});async function Ue(e){let o=new AbortController,t=setTimeout(()=>o.abort("Timeout"),5e3);try{let r=await fetch(`https://cdn.jsdelivr.net/npm/${e}`,{signal:o.signal});if(r.ok)return clearTimeout(t),r}catch(r){console.error(r)}return fetch(`https://unpkg.com/${e}`)}async function We(e){let o,t,r;U(e==="pkgurl"?null:e);try{if(J&&J.De(),B&&B.De(),J=null,B=null,e==="pkgurl")t=fetch(new URL("lib/browser.min.js",se)),r=fetch(new URL("esbuild.wasm",se));else{let[l,h,f]=e.split(".").map(g=>+g),d=l===0&&(h<8||h===8&&f<33)?"":".min";t=Ue(`esbuild-wasm@${e}/lib/browser${d}.js`),r=Ue(`esbuild-wasm@${e}/esbuild.wasm`)}let a=l=>l.then(h=>{if(!h.ok)throw`${h.status} ${h.statusText}: ${h.url}`;return h}),i=Le==="0"||Le==="1"?Le:null,[s,p,c]=await Promise.all([nt,a(t).then(l=>l.text()),a(r).then(l=>l.arrayBuffer())]),u=[p,`
var polywasm=${i};`,s],n=URL.createObjectURL(new Blob(u,{type:"application/javascript"}));return await new Promise((l,h)=>{let f=new Worker(n);f.onmessage=d=>{if(d.data.Ae==="slow"){let g=document.getElementById("slowWarning");g.innerHTML="<span>\u26A0\uFE0F Processing is slow because </span><span>WebAssembly is disabled \u26A0\uFE0F</span>",g.style.display="flex";return}f.onmessage=null,d.data.Ae==="success"?(l(f),oe()):(h(new Error("Failed to create worker")),o=d.data.nt),URL.revokeObjectURL(n)},f.postMessage([e,c],[c])})}catch(a){throw Be(o||a+""),a}}function _(e){let o=(t,r)=>{J?(B&&B.De(),B=r):(J=r,t.onmessage=a=>{t.onmessage=null,r.rt(a.data),J=null,B&&(o(t,B),B=null)},t.postMessage(r.ot))};return new Promise((t,r)=>{ie.then(a=>o(a,{ot:Se(e),rt:t,De:()=>r(new Error("Task aborted"))}),r)})}var Se=e=>{if(typeof e=="function"){let o=e+"";return new EvalError("function "+e.name+o.slice(o.indexOf("(")))}return typeof e=="object"&&e&&!(e instanceof RegExp)?Array.isArray(e)?e.map(Se):Object.fromEntries(Object.entries(e).map(([o,t])=>[o,Se(t)])):e};He()||z(se?"pkgurl":"latest");
